CREATE TABLE CITY (
    ID SERIAL NOT NULL,
    NAME VARCHAR(50) NOT NULL,
    DISTANCE_TO_PARIS DECIMAL(10, 2) NOT NULL,
    TIME_TO_PARIS NUMERIC(8) NOT NULL, -- Dur√©e du trajet vers Paris en secondes.
    CONSTRAINT CST_PK_CITY PRIMARY KEY (ID)
);

CREATE TABLE PLANE_TYPE (
    ID SERIAL NOT NULL,
    NAME VARCHAR(50) NOT NULL,
    SALE_PRICE DECIMAL(10, 2) NOT NULL,
    COUNT_TOTAL_PLACES NUMERIC(3) NOT NULL,
    CONSTRAINT CST_PK_PLANE_TYPE PRIMARY KEY (ID)
);

CREATE TABLE PLANE_TYPE_CLASS (
    ID SERIAL NOT NULL,
    NAME VARCHAR(50) NOT NULL,
    COUNT_TOTAL_PLACES NUMERIC(3) NOT NULL,
    PLANE_TYPE_ID INT8 NOT NULL,
    CONSTRAINT CST_PK_PLANE_TYPE_CLASS PRIMARY KEY (ID),
    CONSTRAINT CST_FK_PLANE_TYPE_CLASS_PLANE_TYPE_ID FOREIGN KEY (PLANE_TYPE_ID) REFERENCES PLANE_TYPE(ID)
);

CREATE TABLE PLANE (
    ID SERIAL NOT NULL,
    PLANE_TYPE_ID INT8 NOT NULL,
    CONSTRAINT CST_PK_PLANE PRIMARY KEY (ID),
    CONSTRAINT CST_FK_PLANE_PLANE_TYPE_ID FOREIGN KEY (PLANE_TYPE_ID) REFERENCES PLANE_TYPE(ID)
);

CREATE TABLE FLIGHT (
    ID SERIAL NOT NULL,
    START_DATE TIMESTAMP WITH TIME ZONE NOT NULL,
    ARRIVAL_DATE TIMESTAMP WITH TIME ZONE NOT NULL,
    FLOOR_PRICE DECIMAL(10, 2) NOT NULL,
    START_CITY_ID INT8 NOT NULL,
    ARRIVAL_CITY_ID INT8 NOT NULL,
    PLANE_ID INT8 NOT NULL,
    CONSTRAINT CST_PK_FLIGHT PRIMARY KEY (ID),
    CONSTRAINT CST_FK_FLIGHT_START_CITY_ID FOREIGN KEY (START_CITY_ID) REFERENCES CITY(ID),
    CONSTRAINT CST_FK_FLIGHT_ARRIVAL_CITY_ID FOREIGN KEY (ARRIVAl_CITY_ID) REFERENCES CITY(ID),
    CONSTRAINT CST_FK_FLIGHT_PLANE_ID FOREIGN KEY (PLANE_ID) REFERENCES PLANE(ID)
);

CREATE TABLE FLIGHT_CLASS (
    ID SERIAL NOT NULL,
    FLOOR_PLACE_PRICE DECIMAL(10, 2) NOT NULL,
    PLACE_PRICE DECIMAL(10, 2) NOT NULL,
    COUNT_AVAILABLE_PLACES NUMERIC(3) NOT NULL,
    COUNT_OCCUPIED_PLACES NUMERIC(3) NOT NULL,
    FLIGHT_ID INT8 NOT NULL,
    PLANE_TYPE_CLASS_ID INT8 NOT NULL,
    CONSTRAINT CST_PK_FLIGHT_CLASS PRIMARY KEY (ID),
    CONSTRAINT CST_FK_FLIGHT_CLASS_FLIGHT_ID FOREIGN KEY (FLIGHT_ID) REFERENCES FLIGHT(ID),
    CONSTRAINT CST_FK_FLIGHT_CLASS_PLANE_TYPE_CLASS_ID FOREIGN KEY (PLANE_TYPE_CLASS_ID) REFERENCES PLANE_TYPE_CLASS(ID)
);

CREATE TABLE GLOBAL (
      ID SERIAL NOT NULL,
      START_DATE TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT '2022-01-27T23:00:00.00Z',
      END_DATE TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT '2022-01-30T22:59:00.00Z',
      BALANCE DECIMAL(32, 2) NOT NULL DEFAULT 11000000,
      BALANCE_INITIALIZATION DECIMAL(32, 2) NOT NULL DEFAULT 10000000,
      FUEL_COST DECIMAL(10, 2) NOT NULL DEFAULT 0.4,
      CONSOMMATION_FUEL_COST DECIMAL(10, 2) NOT NULL DEFAULT 8.39,
      PASSENGER_TAX DECIMAL(10, 2) NOT NULL DEFAULT 18,
      MAINTENANCE_COST DECIMAL(10, 2) NOT NULL DEFAULT 1070,
      FIRST_CLASS_RATE DECIMAL(2, 2) NOT NULL DEFAULT 0.5,
      BUSINESS_CLASS_RATE DECIMAL(2, 2) NOT NULL DEFAULT 0.3,
      ECONOMIC_CLASS_RATE DECIMAL(2, 2) NOT NULL DEFAULT 0.2,
      PLACE_PRICE_FACTOR DECIMAL(10, 2) NOT NULL DEFAULT 2,
      PERCENTAGE_CANCELLATION DECIMAL(3, 2) NOT NULL DEFAULT 0.1,
      OFFSET_PLACES_RECOMMANDATION INT8 NOT NULL DEFAULT 10,
      OFFSET_HOURS_RECOMMANDATION INT8 NOT NULL DEFAULT 2,
      CONSTRAINT CST_PK_GLOBAL PRIMARY KEY (ID)
);